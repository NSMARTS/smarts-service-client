<div class="page">
  <div class="page_header">
    <div class="page_title">Edit Company</div>
  </div>

  <form [formGroup]="editCompanyForm" (ngSubmit)="editCompany()">
    <div class="add_container">

      <!-- company name -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Company Name</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-form-field appearance="outline" class="companyFormFieldBox">
            <mat-label>Company Name</mat-label>
            <input matInput type="text" formControlName="companyName" />
            <mat-error *ngIf="editCompanyForm.controls['companyName'].hasError('required')">
              Please enter company name.
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- Annual Policy -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Annual Policy</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-radio-group mat-radio-group name="grpName">
            <input type="radio" value="byYear" formControlName="annualPolicy"
              [checked]="editCompanyForm.get('annualPolicy')?.value === 'byYear' ? true : false" />by
            year
            <input type="radio" value="byContract" formControlName="annualPolicy"
              [checked]="editCompanyForm.get('annualPolicy')?.value === 'byContract' ? true : false" />by
            contract
          </mat-radio-group>
        </div>
      </div>

      <!-- rollover -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Rollover</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-radio-group mat-radio-group name="grpName">
            <input type="radio" formControlName="isRollover" [value]="true"
              [checked]="editCompanyForm.get('isRollover')?.value" />Yes
            <input type="radio" formControlName="isRollover" [value]="false"
              [checked]="!editCompanyForm.get('isRollover')?.value" />No
          </mat-radio-group>
        </div>
      </div>
      <div *ngIf="editCompanyForm.get('isRollover')?.value === true">
        <!-- rollover max month -->
        <div class="lineDivider">
          <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
            <span>Rollover Max Month</span>
          </div>
          <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
            <mat-form-field appearance="outline" class="formFieldBox formSpacer">
              <mat-label>Rollover Max Month (month)</mat-label>
              <input matInput type="number" class="numeric-input" formControlName="rolloverMaxMonth"
                placeholder="Rollover Max Month" />
              <mat-error *ngIf="editCompanyForm.controls['rolloverMaxMonth'].hasError('min')">
                Please enter positive number.
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <!-- rollover max leave day -->
        <div class="lineDivider">
          <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
            <span>Rollover Max Leave Days</span>
          </div>
          <div class="rightTable" fxFlex>
            <mat-form-field appearance="outline" class="formFieldBox formSpacer">
              <mat-label>Rollover Max Leave Days</mat-label>
              <input matInput type="number" class="numeric-input" formControlName="rolloverMaxLeaveDays"
                placeholder="Rollover Max Leave Days" />
            </mat-form-field>
            <mat-error *ngIf="editCompanyForm.controls['rolloverMaxLeaveDays'].hasError('min')">
              Please enter positive number.
            </mat-error>
          </div>
        </div>
      </div>

      <!-- Replacement Day -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Replacement Day</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-radio-group mat-radio-group name="grpName">
            <input type="radio" formControlName="isReplacementDay" [value]="true"
              [checked]="editCompanyForm.get('isReplacementDay')?.value " />Yes
            <input type="radio" formControlName="isReplacementDay" [value]="false"
              [checked]="!editCompanyForm.get('isReplacementDay')?.value " />No
          </mat-radio-group>
        </div>
      </div>


      <!-- RD Validity Day -->
      <div *ngIf="editCompanyForm.get('isReplacementDay')?.value == true">
        <div class="lineDivider">
          <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
            <span>RD Validity Term</span>
          </div>
          <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
            <mat-form-field appearance="outline" class="formFieldBox formSpacer">
              <mat-label>RD Validity Term (month)</mat-label>
              <input matInput type="number" class="numeric-input" formControlName="rdValidityTerm"
                placeholder="RD Validity Term" />
              <mat-error *ngIf="editCompanyForm.controls['rdValidityTerm'].hasError('min')">
                Please enter positive number.
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>

      <!-- Advance Annual Leave -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Advance Annual Leave</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-radio-group mat-radio-group name="grpName">
            <input type="radio" formControlName="isAdvanceLeave" [value]="true"
              [checked]="editCompanyForm.get('isAdvanceLeave')?.value" />Yes
            <input type="radio" formControlName="isAdvanceLeave" [value]="false"
              [checked]="!editCompanyForm.get('isAdvanceLeave')?.value" />No

          </mat-radio-group>
        </div>
      </div>

      <!--  Approval of Leave -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Approval of Leave</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-radio-group mat-radio-group name="grpName">
            <input type="radio" [value]="true" formControlName="isPending" />Yes
            <input type="radio" [value]="false" formControlName="isPending" />No
          </mat-radio-group>
        </div>
      </div>

      <!-- Contract Date -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Contract Date</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-form-field appearance="outline" class="companyFormFieldBox">
            <mat-label>Contract Date</mat-label>
            <input matInput [matDatepicker]="picker1" formControlName="contractDate"
              (dateChange)="contractDatePickChange($event.value)">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

      <!-- Pay Date -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Pay Date</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
          <mat-form-field appearance="outline" class="companyFormFieldBox">
            <mat-label>Pay Date</mat-label>
            <input matInput [matDatepicker]="picker2" formControlName="payDate"
              (dateChange)="payDatePickChange($event.value)">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

      <!-- leave standard -->
      <div class="lineDivider">
        <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
          <span>Leave Standard</span>
        </div>
        <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">

          <div formArrayName="leaveStandards" *ngFor="let leaveStandard of getLeaveStandardsControls(); let i = index">
            <div [formGroupName]="i">
              <div class="form-row">
                <div class="form-field">
                  <input type="hidden" formControlName="year" />
                  <div class="yearLabel"> {{ i + 1 }} year</div>
                </div>
                <div class="form-field">
                  <mat-form-field appearance="outline">
                    <mat-label>Annual Leave</mat-label>
                    <input matInput type="number" class="numeric-input" formControlName="annualLeave" />
                    <mat-error *ngIf="leaveStandard.hasError('min', 'annualLeave')">
                      Please enter positive number.
                    </mat-error>
                  </mat-form-field>

                </div>
                <div class="form-field">
                  <mat-form-field appearance="outline">
                    <mat-label>Sick Leave</mat-label>
                    <input matInput type="number" class="numeric-input" formControlName="sickLeave" />
                    <mat-error *ngIf="leaveStandard.hasError('min', 'sickLeave')">
                      Please enter positive number.
                    </mat-error>
                  </mat-form-field>
                </div>
                <div *ngIf="i <= 0" class="empty">
                </div>
                <div *ngIf="i > 0" class="clickBtn" (click)="cancelItem(i)">
                  <mat-icon>remove</mat-icon>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field">
                <input type="hidden"/>
                <div class="yearLabel">default years</div>
              </div>
            <div class="form-field">
                <mat-form-field appearance="outline">
                  <mat-label>Annual Leave</mat-label>
                  <input matInput type="number" class="numeric-input" formControlName="defaultAnnualLeave" />
                  <mat-error *ngIf="editCompanyForm.controls['defaultAnnualLeave'].hasError('required')">
                    Please enter annual leave.
                  </mat-error>
                  <mat-error *ngIf="editCompanyForm.controls['defaultAnnualLeave'].hasError('min')">
                    Please enter positive number.
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="form-field">
                <mat-form-field appearance="outline">
                  <mat-label>Sick Leave</mat-label>
                  <input matInput type="number" class="numeric-input" formControlName="defaultSickLeave" />
                  <mat-error *ngIf="editCompanyForm.controls['defaultSickLeave'].hasError('required')">
                    Please enter sick leave.
                  </mat-error>
                  <mat-error *ngIf="editCompanyForm.controls['defaultSickLeave'].hasError('min')">
                    Please enter positive number.
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="empty">
            </div>
          </div>
          default year는 +버튼을 눌러 추가로 설정한 연차 이후의 연차들을 의미합니다.
          <div class="addclickBtn" (click)="addItem()">
            <mat-icon>add</mat-icon>
          </div>
        </div>
      </div>

      <div fxLayoutAlign="center center" class="booterBtn">
        <button mat-flat-button type="submit">Edit</button>
        <div style="width: 20px;"></div>
        <button mat-flat-button class="cancelBtn" (click)="toBack()">Cancel</button>
      </div>

    </div>
  </form>

</div>