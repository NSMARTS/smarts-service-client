<div class="page">
    <div class="page_header">
        <div class="page_title">Edit Employment Information</div>
    </div>

    <form [formGroup]="editEmployeeForm">
        <div class="add_container">

            <!-- Annual Policy -->
            <div class="lineDivider" fxLayout="row wrap">
                <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                    <div class="leftBox">
                    <span>Annual Policy</span>
                    </div>
                </div>

                <div class="rightTable" fxFlex>
                    <mat-radio-group mat-radio-group name="grpName">
                    <input type="radio" value="byYear" formControlName="annualPolicy"
                        [checked]="editEmployeeForm.get('annualPolicy')?.value === 'byYear' ? true : false" />by
                    year
                    <input type="radio" value="byContract" formControlName="annualPolicy"
                        [checked]="editEmployeeForm.get('annualPolicy')?.value === 'byContract' ? true : false" />by
                    contract
                    </mat-radio-group>
                </div>
            </div>

            <!-- rollover -->
            <div class="lineDivider" fxLayout="row wrap">
                <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                    <div class="leftBox">
                        <span>Rollover</span>
                    </div>
                </div>

                <div class="rightTable" fxFlex>
                    <mat-radio-group mat-radio-group name="grpName">
                        <input type="radio" formControlName="isRollover" [value]="true"
                        [checked]="editEmployeeForm.get('isRollover')?.value" />Yes
                        <input type="radio" formControlName="isRollover" [value]="false"
                        [checked]="!editEmployeeForm.get('isRollover')?.value" />No
                    </mat-radio-group>
                </div>
            </div>

            <div *ngIf="editEmployeeForm.get('isRollover')?.value === true">
                <!-- rollover max month -->
                <div class="lineDivider">
                    <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                        <div class="leftBox">
                            <span>Rollover Max Month</span>
                        </div>
                    </div>

                    <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
                        <mat-form-field appearance="outline" class="formFieldBox formSpacer">
                            <mat-label>Rollover Max Month (month)</mat-label>
                            <input matInput type="number" class="numeric-input" formControlName="rolloverMaxMonth"
                                placeholder="Rollover Max Month" />
                            <mat-error *ngIf="editEmployeeForm.controls['rolloverMaxMonth'].hasError('min')">
                                Please enter positive number.
                            </mat-error>    
                        </mat-form-field>
                    </div>
                </div>

                <!-- rollover max leave days -->
                <div class="lineDivider">
                    <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                        <div class="leftBox">
                        <span>Rollover Max Leave Days</span>
                        </div>
                    </div>
                    <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
                        <mat-form-field appearance="outline" class="formFieldBox formSpacer">
                            <mat-label>Rollover Max Leave Days</mat-label>
                            <input matInput type="number" class="numeric-input" formControlName="rolloverMaxLeaveDays"
                                placeholder="Rollover Max Leave Days" />
                            <mat-error *ngIf="editEmployeeForm.controls['rolloverMaxLeaveDays'].hasError('min')">
                                Please enter positive number.
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </div>

            <!-- Replacement Day -->
            <div class="lineDivider" fxLayout="row wrap">
                <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                    <div class="leftBox">
                        <span>Replacement Day</span>
                    </div>
                </div>

                <div class="rightTable" fxFlex>
                    <mat-radio-group mat-radio-group name="grpName">
                        <input type="radio" formControlName="isReplacementDay" [value]="true"
                        [checked]="editEmployeeForm.get('isReplacementDay')?.value " />Yes
                        <input type="radio" formControlName="isReplacementDay" [value]="false"
                        [checked]="!editEmployeeForm.get('isReplacementDay')?.value " />No
                    </mat-radio-group>
                </div>
            </div>

            <!-- RD Validity Day -->
            <div *ngIf="editEmployeeForm.get('isReplacementDay')?.value == true">
                <div class="lineDivider" fxLayout="row wrap">
                    <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                        <div class="leftBox">
                            <span>RD Validity Term</span>
                        </div>
                    </div>

                    <div class="rightTable" fxFlex>
                        <mat-form-field appearance="outline" class="formFieldBox formSpacer">
                            <input matInput type="number" class="numeric-input" formControlName="rdValidityTerm"
                                placeholder="RD Validity Term" />
                            <mat-error *ngIf="editEmployeeForm.controls['rdValidityTerm'].hasError('min')">
                                Please enter positive number.
                            </mat-error>
                        </mat-form-field> month(s)
                    </div>
                </div>
            </div>

            <!-- Advance Annual Leave -->
            <div class="lineDivider" fxLayout="row wrap">
                <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                    <div class="leftBox">
                        <span>Advance Annual Leave</span>
                    </div>
                </div>

                <div class="rightTable" fxFlex>
                    <mat-radio-group mat-radio-group name="grpName">
                        <input type="radio" formControlName="isAdvanceLeave" [value]="true"
                        [checked]="editEmployeeForm.get('isAdvanceLeave')?.value" />Yes
                        <input type="radio" formControlName="isAdvanceLeave" [value]="false"
                        [checked]="!editEmployeeForm.get('isAdvanceLeave')?.value" />No
                    </mat-radio-group>
                </div>
            </div>

            <!-- leave standard -->
            <div class="lineDivider">
                <div class="leftTable" fxFlex="30" fxFlex.gt-md="20">
                    <div class="leftBox">
                        <span>Annual Leave</span>
                    </div>
                </div>

                <div class="rightTable" fxFlex="70" fxFlex.gt-md="70">
                    <div id="leaveStandards_{{i+1}}" formArrayName="leaveStandards"
                    *ngFor="let leaveStandard of getLeaveStandardsControls(); let i = index" fxLayout="column"
                    fxLayoutGap="30px">
                        <div [formGroupName]="i">

                            <div class="form-row">
                                <div class="form-field">
                                    <input type="hidden" formControlName="year" />
                                    <div class="yearLabel"> {{ i + 1 }} year</div>
                                </div>

                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="formFieldBox">
                                        <mat-label>Annual Leave</mat-label>
                                        <input matInput type="number" class="numeric-input" formControlName="annualLeave" />
                                        <mat-error *ngIf="leaveStandard.hasError('min', 'annualLeave')">
                                            Please enter positive number.
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div class="form-field">
                                    <mat-form-field appearance="outline" class="formFieldBox">
                                        <mat-label>Sick Leave</mat-label>
                                        <input matInput type="number" class="numeric-input" formControlName="sickLeave" />
                                        <mat-error *ngIf="leaveStandard.hasError('min', 'sickLeave')">
                                            Please enter positive number.
                                        </mat-error>
                                    </mat-form-field>
                                </div>

                                <div *ngIf="i <= 0" class="empty"></div>
                                <div *ngIf="i > 0" class="clickBtn" (click)="cancelItem(i)">
                                    <mat-icon class="addMark">remove</mat-icon>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-field">
                            <input type="hidden"/>
                            <div class="yearLabel">default years</div>
                          </div>
                        <div class="form-field">
                            <mat-form-field appearance="outline">
                              <mat-label>Annual Leave</mat-label>
                              <input matInput type="number" class="numeric-input" formControlName="defaultAnnualLeave" />
                              <mat-error *ngIf="editEmployeeForm.controls['defaultAnnualLeave'].hasError('required')">
                                Please enter annual leave.
                              </mat-error>
                              <mat-error *ngIf="editEmployeeForm.controls['defaultAnnualLeave'].hasError('min')">
                                Please enter positive number.
                              </mat-error>
                            </mat-form-field>
                          </div>
                          <div class="form-field">
                            <mat-form-field appearance="outline">
                              <mat-label>Sick Leave</mat-label>
                              <input matInput type="number" class="numeric-input" formControlName="defaultSickLeave" />
                              <mat-error *ngIf="editEmployeeForm.controls['defaultSickLeave'].hasError('required')">
                                Please enter sick leave.
                              </mat-error>
                              <mat-error *ngIf="editEmployeeForm.controls['defaultSickLeave'].hasError('min')">
                                Please enter positive number.
                              </mat-error>
                            </mat-form-field>
                          </div>
                          <div class="empty">
                        </div>
                      </div>
                      default year는 +버튼을 눌러 추가로 설정한 연차 이후의 연차들을 의미합니다.

                    <div class="addclickBtn" (click)="addItem()">
                        <mat-icon class="addMark">add</mat-icon>
                    </div>
                </div>
            </div>

            <mat-card-actions fxLayoutAlign="center" class="booterBtn">
                <!-- <button mat-flat-button class="editBtn" (click)="updateLeaveInfo();">Edit</button> -->
                <button mat-flat-button class="editBtn" (click)="updateProfileInfo();">Edit</button>
                <!-- <button mat-raised-button class="cancelBtn" (click)="backManagerList();">Cancel</button> -->
                <div style="width: 20px;"></div>
                <button mat-flat-button class="cancelBtn" (click)="toBack()">Cancel</button>
            </mat-card-actions>

        </div>
    </form>
</div>