<div class="page">
  <div class="page_header">
    <div class="page_title">Log History</div>
  </div>



  <!-- 직원 & 매저 조회 -->
  <!-- <div class="log__container"> -->
    <div class="table_container">
      <form [formGroup]="searchLogsForm" novalidate>
        <div class="filter">

          <div class="selectContent">

            <mat-form-field class="formEmailFieldBox" appearance="outline">
              <mat-label>Company</mat-label>
              <!-- https://stackoverflow.com/questions/5601647/html5-email-input-pattern-attribute -->
              <input matInput type="text" formControlName="companyFormControl" [matAutocomplete]="auto" />
              <!-- <mat-error>an e-mail is required</mat-error> -->
              <mat-error>Please input a correct e-mail!</mat-error>
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredCompany()" [value]="option.companyName">
                  {{option.companyName}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>


            <mat-form-field class="formEmailFieldBox" appearance="outline">
              <mat-label>Email(Name)</mat-label>
              <!-- https://stackoverflow.com/questions/5601647/html5-email-input-pattern-attribute -->
              <input matInput type="email" spellcheck="false" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                formControlName="emailFormControl" />
              <!-- <mat-error>an e-mail is required</mat-error> -->
              <mat-error>Please input a correct e-mail!</mat-error>
            </mat-form-field>

            <div class="date">
              <div class="left">
                <mat-form-field class="formFieldBox" appearance="outline">
                  <mat-label>Choose a date</mat-label>
                  <input matInput [matDatepicker]="picker1" formControlName="startOfMonth">
                  <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                  <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
              </div>
              <label> ~ </label>
              <div class="right">
                <mat-form-field class="formFieldBox" appearance="outline">
                  <mat-label>Choose a date</mat-label>
                  <input matInput [matDatepicker]="picker2" formControlName="endOfMonth">
                  <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                  <mat-datepicker #picker2></mat-datepicker>
                </mat-form-field>
              </div>
              <button class="searchBtn" mat-flat-button (click)="getEmployeesByQuery()"><img
                  src="assets/image/search.png" class="serachImg"></button>
            </div>

          </div>
        </div>
      </form>

      <!-- <div class="example-loading-shade" *ngIf="isLoadingResults || isRateLimitReached">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
      <div class="example-rate-limit-reached" *ngIf="isRateLimitReached">
        API rate limit has been reached. It will be reset in one minute.
      </div>
    </div> -->
  <div class="log__container">
    <div class="margin">
      <table mat-table class="table" [dataSource]="dataSource" matSort matSortActive="leaveTime" matSortDisableClear
        matSortDirection="desc">

        <ng-container matColumnDef="employee">
          <th mat-header-cell *matHeaderCellDef> Employee </th>
          <td mat-cell *matCellDef="let element">
            {{ element?.employee?.email || element?.manager?.email || element?.admin?.email }}
          </td>
        </ng-container>

        <ng-container matColumnDef="company">
            <th mat-header-cell *matHeaderCellDef> Company </th>
            <td mat-cell *matCellDef="let element">
                {{ element.company ? element.company.companyName : 'Global HR KOREA' }}
            </td>
          </ng-container>

        <ng-container matColumnDef="leaveTime">
          <th mat-header-cell *matHeaderCellDef> Last Access Date </th>
          <td mat-cell *matCellDef="let element"> {{element.leaveTime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>
        </ng-container>

        <ng-container matColumnDef="url">
          <th mat-header-cell *matHeaderCellDef> Url </th>
          <td mat-cell *matCellDef="let element"> {{element.url}} </td>
        </ng-container>



        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row (click)="handleClick(row)" [class.demo-row-is-clicked]="clickedRows.has(row)"
          *matRowDef="let row; columns: displayedColumns;" [ngClass]="{ 'click-row': row._id === selectedRowId }"></tr>
        <tr class=" mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="9999">
            No data
          </td>
        </tr>
      </table>

      <mat-paginator [length]="resultsLength" [pageSize]="10" [pageSizeOptions]="[5, 10, 50]"
        showFirstLastButtons></mat-paginator>
    </div>
<div class="margin">
    <app-find-user-logs />
</div>
</div>


</div>
  <!-- </div> -->
</div>